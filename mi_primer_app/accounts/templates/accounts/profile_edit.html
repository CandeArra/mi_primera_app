{% extends 'peliculas/base.html' %}

{% load static %}  <!-- Aquí cargas el tag static -->

{% block title %}Editar Perfil{% endblock %}

{% block content %}
  <h2>Editar Perfil</h2>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Mostrar la imagen actual del avatar o la predeterminada -->
    <div>
      <label for="{{ profile_form.avatar.id_for_label }}">Avatar:</label>
      <div>
        {% if profile_form.instance.avatar %}
          <!-- Si el usuario tiene un avatar -->
          <img src="{{ profile_form.instance.avatar.url }}" alt="Avatar" width="150" height="150">
        {% else %}
          <!-- Si el usuario NO tiene un avatar, muestra la imagen predeterminada -->
          <img src="{% static 'avatars/6858504.png' %}" alt="Avatar" width="150" height="150">
        {% endif %}
      </div>
    </div>

    <!-- Solo mostrar el campo para cambiar el avatar -->
    <div>
      {{ profile_form.avatar }}
    </div>

    <!-- Mostrar los demás campos -->
    <div>
      <label for="{{ profile_form.bio.id_for_label }}">Biografía:</label>
      <div>
        {{ profile_form.bio }}
      </div>
    </div>

    <div>
      <label for="{{ profile_form.birthdate.id_for_label }}">Fecha de nacimiento:</label>
      <div>
        {{ profile_form.birthdate }}
      </div>
    </div>

    <div>
      <label for="{{ profile_form.link.id_for_label }}">Enlace:</label>
      <div>
        {{ profile_form.link }}
      </div>
    </div>

    <button type="submit">Guardar Cambios</button>
  </form>
{% endblock %}